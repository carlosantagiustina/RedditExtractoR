{
    "contents" : "E1 = \"https://www.reddit.com/r/AskReddit/comments/38enja/serious_do_you_think_extremists_on_the/\"\nE2 = \"https://www.reddit.com/r/conspiracy/comments/2thci6/the_way_reddit_discusses_the_pro_and_antivaccine/\"\nE3 = \"https://www.reddit.com/r/conspiracy/comments/336ega/more_evidence_of_organized_vaccine_propaganda_pro/\"\ncontent_data = reddit_content(E3)\n\n# X = against, O = for, I = indeterminate, R = removed\n\n#                             1   2   3   4   5   6   7   8   9   10\ncontent_data$disposition = c(\"I\",\"I\",\"X\",\"I\",\"O\",\"X\",\"I\",\"I\",\"I\",\"X\", # 0\n                             \"X\",\"X\",\"I\",\"X\",\"O\",\"X\",\"O\",\"O\",\"I\",\"X\", # 1\n                             \"I\",\"I\",\"I\",\"I\",\"I\",\"I\",\"I\",\"I\",\"I\",\"I\", # 2\n                             \"O\",\"O\",\"I\",\"O\",\"O\",\"I\",\"X\",\"O\",\"O\",\"R\", # 3\n                             \"I\",\"I\",\"I\",\"I\",\"I\",\"I\",\"I\",\"I\",\"I\",\"I\", # 4\n                             \"O\",\"X\",\"I\",\"I\",\"I\",\"R\",\"R\",\"O\",\"I\",\"I\", # 5\n                             \"I\",\"X\",\"I\",\"I\",\"I\",\"R\",\"I\",\"R\",\"I\",\"I\", # 6\n                             \"X\",\"X\",\"O\",\"I\",\"X\",\"O\",\"O\",\"I\")         # 7\n\n\ncontent_data$disposition = gsub(\"I\",\" \",content_data$disposition)\n\n# construct_graph(test)\n\nedges_frame = content_data[,c(\"id\",\"structure\")]\n\nedges_frame$structure = paste0(\"0_\",as.character(edges_frame$structure))\nedges_frame = rbind(data.frame(id=\"0\",structure=\"0\",stringsAsFactors=F),edges_frame)\n\n\nA = B = edges_frame\ncolnames(A) = c(\"from_id\",\"from_structure\")\ncolnames(B) = c(\"to_id\",  \"to_structure\")\nedges_frame = merge(A,B)\nedges_frame = edges_frame[sapply(1:nrow(edges_frame), \n                                 function(x)grepl(paste0(\"^\",edges_frame$from_structure[x],\"_\\\\d+$\"),\n                                                  edges_frame$to_structure[x])), c(\"from_id\",\"to_id\")]\n\nnodes_frame = content_data\nextra_row   = data.frame(id = 0, comment_score = 0, author=nodes_frame$author[1], controversiality = 0, stringsAsFactors=T)\nother_cols  = setdiff(colnames(nodes_frame),colnames(extra_row))\ncols_to_add = as.data.frame(matrix(NA,nrow=1,ncol=length(other_cols)))\ncolnames(cols_to_add) = other_cols\nextra_row = cbind(extra_row,cols_to_add)\nnodes_frame = rbind(extra_row,nodes_frame)\nnodes_frame$start_node = ifelse(nodes_frame$id==0,1,0)\nnodes_frame = nodes_frame[,-which(colnames(nodes_frame)==\"comment\")] \n# comments create problems when you export the file and try to read it with other software\n\n  colscale = function(x){\n    if(min(x$comment_score)<0){\n      min_col  = \"firebrick2\"\n      mincolsq = seq(min(as.numeric(x$comment_score)), 0, length.out = ceiling(nrow(x)/2))\n      maxcolsq = seq(0, max(as.numeric(x$comment_score)), length.out = ceiling(nrow(x)/2))\n      if(nrow(x) %% 2 == 1){\n        colsq  = c(mincolsq[-length(mincolsq)],maxcolsq[-1])\n      } else{\n        colsq  = c(mincolsq,maxcolsq)\n      }\n    } else{\n      min_col = \"ivory\"\n      colsq   = seq(0,max(as.numeric(x$comment_score)),length.out = nrow(x))\n    }\n    RP  = grDevices::colorRampPalette(c(min_col,\"royalblue\"))\n    col = RP(nrow(x))[c(findInterval(x$comment_score,colsq,all.inside=T))]\n    return(col)\n  }\n  \n  g = igraph::graph.data.frame(edges_frame, directed = T, vertices = nodes_frame)\n  plot(g,\n       vertex.frame.color = ifelse(igraph::V(g)$controversiality==1,\"green\",NA),\n       layout             = igraph::layout.reingold.tilford,\n       vertex.label       = ifelse(igraph::V(g)$start_node==1,igraph::V(g)$author,igraph::V(g)$disposition),\n       vertex.label.cex   = ifelse(igraph::V(g)$start_node==1,1,0.65),\n       vertex.label.color = \"white\",#ifelse(igraph::V(g)$controversiality==1,\"darkred\",\"navy\"),\n       #vertex.label.font  = ifelse(igraph::V(g)$author==igraph::V(g)$user,4,1),\n       vertex.size        = ifelse(igraph::V(g)$start_node==1,20,9),\n       vertex.color       = ifelse(igraph::V(g)$start_node==1,\"orange2\",colscale(nodes_frame)),\n       edge.arrow.size    = 0.2,\n       edge.color         = \"skyblue2\")\n  graphics::title(content_data$title[1],cex.main=0.75,col.main=\"royalblue\")",
    "created" : 1445750177369.000,
    "dirty" : true,
    "encoding" : "",
    "folds" : "",
    "hash" : "1507094951",
    "id" : "66AF21E9",
    "lastKnownWriteTime" : 0,
    "path" : null,
    "project_path" : null,
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}